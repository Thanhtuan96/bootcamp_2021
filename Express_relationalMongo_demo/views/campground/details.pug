extends ../layouts/mainLayout

block links
    link(rel='stylesheet',type='text/css',href='../CSS/star.css')

block content
        .container-fluid.mt-2
            .row.d-flex
                .camp-container.d-flex.flex-column.justify-content-center.align-items-center.border.border-primary.rounded.py-5.col.me-1.col-ms-12(style="height: 100%;") 
                        img.img-fluid(src= camp.imageUrl)
                        h2= camp.title 
                        p= camp.description
                        p= camp.price
                        if(camp.author)
                            p= 'posted by ' + camp.author.username
                        .rating-star 
                            span.fa.fa-star.checked 
                            span.fa.fa-star.checked 
                            span.fa.fa-star.checked
                            span.fa.fa-star
                            span.fa.fa-star
                        if(camp.author && camp.author.equals(currentUser))    
                            form(action="/campgrounds/" + camp._id + "?_method=DELETE",method='post',id='delete-form') 
                                .btn-group
                                    a.btn.btn-outline-primary(href="/campgrounds/" + camp._id ) 
                                        .bi.bi-three-dots.me-1 Details
                                    a.btn.btn-outline-secondary(href="/campgrounds/" + camp._id + "/edit") 
                                        .bi.bi-pencil-square.me-1 Edit
                                    a.btn.btn-outline-danger( onclick= 'document.getElementById("delete-form").submit();') 
                                        .bi.bi-trash.me-1 Remove 
                .col.col-ms-12.d-flex.flex-column
                    form(action='/campgrounds/'+ camp._id +'/reviews', method='POST')
                        h3 Please leave a review!!
                        .rating-group.mb-3
                            fieldset.starability-heart
                                legend First rating:
                                input#no-rate.input-no-rate(type='radio' name='rating' value='0' checked='' aria-label='No rating.')
                                input#first-rate1(type='radio' name='rating' value='1')
                                label(for='first-rate1' title='Terrible') 1 star
                                input#first-rate2(type='radio' name='rating' value='2')
                                label(for='first-rate2' title='Not good') 2 stars
                                input#first-rate3(type='radio' name='rating' value='3')
                                label(for='first-rate3' title='Average') 3 stars
                                input#first-rate4(type='radio' name='rating' value='4')
                                label(for='first-rate4' title='Very good') 4 stars
                                input#first-rate5(type='radio' name='rating' value='5')
                                label(for='first-rate5' title='Amazing') 5 stars
                        .input-group
                            span.input-group-text Review
                            textarea.form-control(arial-label="review-textarea",name='body' required)
                            button.btn.btn-primary Summit
                    div.mt-2
                        if camp.reviews.length
                            .list-reviews(style="width: 100%; max-width:500px;")
                                each item in camp.reviews 
                                    .list-group-item.d-flex.flex-row.justify-content-between.align-items-center.rounded
                                        .review.flex-grow-1
                                            .fw-bold review
                                            p.starability-result(data-rating= item.rating)= 'Rated: ' + item.rating +' start' 
                                            .body= item.body
                                            .create-at= item.create_at.split(' ').slice(0,5).join(' ')

                                        .btn-container.d-flex.flex-column.m-2
                                            form(action='/campgrounds/' + camp._id + '/reviews/' + item._id+ '?_method=DELETE',method='post')
                                                button.btn.btn-danger delete 
                                            .btn.btn-primary reply
                        else
                                h5 Have no review yet!!!
                                        
                        